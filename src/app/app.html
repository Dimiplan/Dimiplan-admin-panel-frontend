<div class="admin-layout bg-md-sys-color-surface h-screen overflow-hidden">
  <!-- Top App Bar -->
  <div class="bg-md-sys-color-surface-container shadow-elevation-2 border-b border-md-sys-color-outline-variant relative z-50">
    <div class="flex items-center h-16 px-4">
      <button class="md-button md-button-text p-3 rounded-full mr-2 touch-target" (click)="toggleSidenav()" aria-label="Toggle navigation">
        <mat-icon class="w-6 h-6 text-md-sys-color-on-surface">menu</mat-icon>
      </button>
      <h1 class="md-typescale-title-large text-md-sys-color-on-surface flex-1 truncate">Dimiplan 관리자 패널</h1>
    </div>
  </div>

  <div class="flex relative">
    <!-- Mobile backdrop -->
    <div *ngIf="sidenavOpened" class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden" (click)="toggleSidenav()"></div>

    <!-- Navigation Rail -->
    <nav [class]="sidenavOpened ? 'w-80 translate-x-0' : 'w-20 -translate-x-full lg:translate-x-0'"
         class="bg-md-sys-color-surface-container border-r border-md-sys-color-outline-variant transition-all duration-300 ease-in-out overflow-hidden min-h-full flex flex-col fixed lg:relative z-50 lg:z-auto">
      <!-- Collapsed state header -->
      <div class="p-4 flex justify-center" *ngIf="!sidenavOpened">
        <div class="w-10 h-10 bg-md-sys-color-primary rounded-full flex items-center justify-center">
          <mat-icon class="w-6 h-6 text-md-sys-color-on-primary">admin_panel_settings</mat-icon>
        </div>
      </div>

      <!-- Expanded state header -->
      <div class="p-4" *ngIf="sidenavOpened">
        <div class="flex items-center gap-3 mb-6">
          <div class="w-8 h-8 bg-md-sys-color-primary rounded-full flex items-center justify-center">
            <mat-icon class="w-5 h-5 text-md-sys-color-on-primary">admin_panel_settings</mat-icon>
          </div>
          <div>
            <h3 class="md-typescale-title-medium text-md-sys-color-on-surface">관리 메뉴</h3>
            <p class="md-typescale-body-small text-md-sys-color-on-surface-variant">시스템 관리</p>
          </div>
        </div>
      </div>

      <div class="space-y-1" [class.px-3]="sidenavOpened" [class.px-2]="!sidenavOpened">
        <a routerLink="/dashboard"
           routerLinkActive="active"
           class="nav-item group flex items-center gap-4 p-4 mx-1 rounded-2xl transition-all duration-200 text-md-sys-color-on-surface hover:bg-md-sys-color-surface-container-high relative overflow-hidden touch-target"
           [class.bg-md-sys-color-secondary-container]="router.url === '/dashboard'"
           [class.text-md-sys-color-on-secondary-container]="router.url === '/dashboard'"
           [class.shadow-sm]="router.url === '/dashboard'"
           [title]="!sidenavOpened ? '대시보드' : ''">
          <div class="relative z-10 flex items-center" [class.justify-center]="!sidenavOpened" [class.w-full]="!sidenavOpened">
            <mat-icon class="w-6 h-6 flex-shrink-0" [class.text-md-sys-color-on-secondary-container]="router.url === '/dashboard'">dashboard</mat-icon>
            <span *ngIf="sidenavOpened" class="md-typescale-label-large ml-4">대시보드</span>
          </div>
          <div *ngIf="router.url === '/dashboard'" class="absolute inset-0 bg-gradient-to-r from-md-sys-color-secondary-container/20 to-transparent"></div>
        </a>

        <a routerLink="/logs"
           routerLinkActive="active"
           class="nav-item group flex items-center gap-4 p-4 mx-1 rounded-2xl transition-all duration-200 text-md-sys-color-on-surface hover:bg-md-sys-color-surface-container-high relative overflow-hidden touch-target"
           [class.bg-md-sys-color-secondary-container]="router.url === '/logs'"
           [class.text-md-sys-color-on-secondary-container]="router.url === '/logs'"
           [class.shadow-sm]="router.url === '/logs'"
           [title]="!sidenavOpened ? '로그 관리' : ''">
          <div class="relative z-10 flex items-center" [class.justify-center]="!sidenavOpened" [class.w-full]="!sidenavOpened">
            <mat-icon class="w-6 h-6 flex-shrink-0" [class.text-md-sys-color-on-secondary-container]="router.url === '/logs'">article</mat-icon>
            <span *ngIf="sidenavOpened" class="md-typescale-label-large ml-4">로그 관리</span>
          </div>
          <div *ngIf="router.url === '/logs'" class="absolute inset-0 bg-gradient-to-r from-md-sys-color-secondary-container/20 to-transparent"></div>
        </a>

        <a routerLink="/database"
           routerLinkActive="active"
           class="nav-item group flex items-center gap-4 p-4 mx-1 rounded-2xl transition-all duration-200 text-md-sys-color-on-surface hover:bg-md-sys-color-surface-container-high relative overflow-hidden touch-target"
           [class.bg-md-sys-color-secondary-container]="router.url === '/database'"
           [class.text-md-sys-color-on-secondary-container]="router.url === '/database'"
           [class.shadow-sm]="router.url === '/database'"
           [title]="!sidenavOpened ? '데이터베이스' : ''">
          <div class="relative z-10 flex items-center" [class.justify-center]="!sidenavOpened" [class.w-full]="!sidenavOpened">
            <mat-icon class="w-6 h-6 flex-shrink-0" [class.text-md-sys-color-on-secondary-container]="router.url === '/database'">storage</mat-icon>
            <span *ngIf="sidenavOpened" class="md-typescale-label-large ml-4">데이터베이스</span>
          </div>
          <div *ngIf="router.url === '/database'" class="absolute inset-0 bg-gradient-to-r from-md-sys-color-secondary-container/20 to-transparent"></div>
        </a>

        <a routerLink="/api-docs"
           routerLinkActive="active"
           class="nav-item group flex items-center gap-4 p-4 mx-1 rounded-2xl transition-all duration-200 text-md-sys-color-on-surface hover:bg-md-sys-color-surface-container-high relative overflow-hidden touch-target"
           [class.bg-md-sys-color-secondary-container]="router.url === '/api-docs'"
           [class.text-md-sys-color-on-secondary-container]="router.url === '/api-docs'"
           [class.shadow-sm]="router.url === '/api-docs'"
           [title]="!sidenavOpened ? 'API 문서' : ''">
          <div class="relative z-10 flex items-center" [class.justify-center]="!sidenavOpened" [class.w-full]="!sidenavOpened">
            <mat-icon class="w-6 h-6 flex-shrink-0" [class.text-md-sys-color-on-secondary-container]="router.url === '/api-docs'">code</mat-icon>
            <span *ngIf="sidenavOpened" class="md-typescale-label-large ml-4">API 문서</span>
          </div>
          <div *ngIf="router.url === '/api-docs'" class="absolute inset-0 bg-gradient-to-r from-md-sys-color-secondary-container/20 to-transparent"></div>
        </a>
      </div>

      <div class="border-t border-md-sys-color-outline-variant/30 mt-auto pt-6 pb-4">
        <div class="px-4" *ngIf="sidenavOpened">
          <div class="flex items-center gap-2 p-2 rounded-lg bg-md-sys-color-surface-container-low">
            <mat-icon class="w-4 h-4 text-md-sys-color-on-surface-variant">info</mat-icon>
            <small class="md-typescale-body-small text-md-sys-color-on-surface-variant">버전 1.0.0</small>
          </div>
        </div>
        <div class="flex justify-center px-4" *ngIf="!sidenavOpened">
          <div class="w-8 h-8 flex items-center justify-center rounded-lg bg-md-sys-color-surface-container-low">
            <mat-icon class="w-4 h-4 text-md-sys-color-on-surface-variant" title="버전 1.0.0">info</mat-icon>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 bg-md-sys-color-surface min-h-[calc(100vh-4rem)] lg:ml-0" [class.ml-0]="!sidenavOpened">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
